{% extends 'CoramerSigtecWebBundle:Backend:Common/tableFormat1.html.twig' %}
{% block title %}- {{ 'sigtec.company'|trans }}{% endblock %}
{% block body -%}
    <hgroup id="main-title" class="thin breadcrumb">
        <h1>
            <a href="{{ path('coramer_sigtec_company_index') }}">{{ 'sigtec.company'|trans }}</a>
            <span class="icon-forward"></span>
            <span class="thin">{{ 'sigtec.list'|trans }}</span>
            <p class="button-height align-right">
                <a href="{{ path('coramer_sigtec_company_create') }}" class="button">
                        <span class="button-icon anthracite-gradient"><span class="icon-star"></span></span>
                        {{ 'sigtec.create'|trans }}
                </a>
            </p>
        </h1>
    </hgroup>
    <div ng-controller="TableFormatController">
        <div ng-controller="CompanyIndexController">
                <div loading-container="tableParams.settings().$loading">
                    <table ng-table="tableParams" template-pagination="custom/pager"  template-header="custom/header" api-data-url="{{ path('coramer_sigtec_company_index',{_format:'json'}) }}" class="table table-responsive table-extra-info">
                        <tr ng-repeat="result in $data | filter:tableParams.search" data="[[ result|json ]]">
                            <td width="30" style="text-align: left" header="'ng-table/headers/checkbox.html'">
                                <input type="checkbox" ng-model="checkboxes.items[result.id]" />
                            </td>
                            <td data-title="'{{ 'sigtec.name'|trans }}'" sortable="'name'">
                                <a href="[[ result._links.self.href ]]">[[result.name]]</a>
                            </td>
                            <td data-title="'{{ 'sigtec.rif'|trans }}'" sortable="'rif'">
                                [[result.rif]]
                            </td>
                            <td data-title="'Â¿{{ 'sigtec.rif_validated' | trans }}?'" sortable="'rifValidated'">
                                <small ng-if="result.rif_validated" class="tag green-bg">{{ 'sigtec.yes'|trans }}</small> 
                                <small ng-if="!result.rif_validated" class="tag red-bg">{{ 'sigtec.no'|trans }}</small>
                            </td>
                            <td data-title="'{{ 'sigtec.status'|trans }}'" sortable="'status'">
                                <small ng-if="result.status" class="tag green-bg">{{ 'sigtec.yes'|trans }}</small> 
                                <small ng-if="!result.status" class="tag red-bg">{{ 'sigtec.no'|trans }}</small>
                            </td>
                            <td class="low-padding">
                                <span class="select compact full-width" tabindex="0">
                                    <a href class="select-value form-edit">{{ 'sigtec.actions'|trans }}</a>
                                    <span class="select-arrow"></span>
                                    <span class="drop-down">
                                        <a href ng-click="itemEdit(result._links.edit.href)" >{{ 'sigtec.edit'|trans }}</a>
                                        <a href ng-click="itemDelete(result._links.delete.href)" >{{ 'sigtec.delete'|trans }}</a>
                                        <a ng-if="!result.rif_validated" href ng-click="itemValidateRif(result._links.validate_rif.href)" >{{ 'sigtec.validate_rif'|trans }}</a>
                                    </span>
                                </span>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
{% endblock %}

{% block javascript %}
    {{ parent() }}
    <script type="text/javascript">
        function getTableExtraInfo(data)
            {
                return  '<div class="float-right">' +
                        '<button type="submit" class="button glossy mid-margin-right">' +
                        '<span class="button-icon"><span class="icon-mail"></span></span>' +
                        'Send mail' +
                        '</button>' +
                        '<button type="submit" class="button glossy">' +
                        '<span class="button-icon red-gradient"><span class="icon-cross"></span></span>' +
                        'Remove' +
                        '</button>' +
                        '</div>' +
                        '<strong>{{ 'sigtec.name'|trans }}:</strong> ' + data.name + '<br>' +
                        '<strong>{{ 'sigtec.created_at' |trans }}:</strong> ' + data.created_at + '<br>' +
                        '<strong>{{ 'sigtec.updated_at' | trans }}:</strong> ' + data.updated_at + '<br>'
                        ;
            }
    </script>
{% endblock %}