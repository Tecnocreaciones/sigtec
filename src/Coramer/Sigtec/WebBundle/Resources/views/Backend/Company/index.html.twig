{% extends '::base.html.twig' %}
{% block stylesheets %}
    <!-- Additional styles -->
    <link rel="stylesheet" href="{{ asset('bundles/coramersigtecweb/frontend/css/styles/form3860.css?v=1') }}">
    <link rel="stylesheet" href="{{ asset('bundles/coramersigtecweb/frontend/css/styles/switches3860.css?v=1') }}">
    <link rel="stylesheet" href="{{ asset('bundles/coramersigtecweb/frontend/css/styles/table3860.css?v=1') }}">

    <!-- DataTables -->
    <link rel="stylesheet" href="{{ asset('bundles/coramersigtecweb/frontend/js/libs/DataTables/jquery.dataTables3860.css?v=1') }}">
{% endblock %}
{% block body -%}
    <h1>Company list</h1>

    <table class="records_list table responsive-table" id="example">
        <thead>
            <tr>
                <th>Id</th>
                <th>Name</th>
                <th>Rif</th>
                <th>Validated</th>
                <th>Createdat</th>
                <th>Updatedat</th>

            </tr>
        </thead>

    </table>
    <br />
    <br />
    <div ng-controller="ShowCompanyList">
        
    <div class="table-header button-height">
        <div class="float-right">
            Search&nbsp;<input ng-model="model.search" type="text" name="table_search" id="table_search" value="" class="input mid-margin-left">
        </div>
        [[ model.search ]]
        Show&nbsp;<select name="range"  id="range" class="select blue-gradient glossy" style="width: 80px">
					<option value="10">10</option>
					<option value="20">20</option>
					<option value="40" selected="selected">40</option>
					<option value="100">100</option>
				</select> entries
    </div>
    <table class="table responsive-table" id="sorting-example1">

        <thead>
            <tr>
                <th scope="col"><input type="checkbox" name="check-all" id="check-all" value="1"></th>
                <th scope="col">Text</th>
                <th scope="col" width="15%" class="align-center hide-on-mobile">Date</th>
                <th scope="col" width="15%" class="align-center hide-on-mobile-portrait">Status</th>
                <th scope="col" width="15%" class="hide-on-tablet">Tags</th>
                <th scope="col" width="100" class="align-right">Actions</th>
            </tr>
        </thead>

        <tfoot>
            <tr>
                <td colspan="6">
                    6 entries found
                </td>
            </tr>
        </tfoot>

        <tbody>
            <tr ng-repeat="result in data._embedded.results">
                <th scope="row" class="checkbox-cell"><input type="checkbox" name="checked[]" id="check-1" value="1"></th>
                <td>John Doe</td>
                <td>Jul 5, 2011</td>
                <td>Enabled</td>
                <td><small class="tag">User</small> <small class="tag">Client</small> <small class="tag green-bg">Valid</small></td>
                <td class="low-padding">
                    <span class="select compact full-width" tabindex="0">
                        <a href="javascript:void(0);" class="select-value">Edit</a>
                        <span class="select-arrow"></span>
                        <span class="drop-down">
                            <a href="javascript:void(0);">Put offline</a>
                            <a href="javascript:void(0);">Review</a>
                            <a href="javascript:void(0);">Put to trash</a>
                            <a href="javascript:void(0);">Delete</a>
                        </span>
                    </span>
                </td>
            </tr>
        </tbody>

    </table>
    <form method="post" action="#" class="table-footer button-height large-margin-bottom">
        <div class="float-right">
            <div class="button-group">
                <a href="javascript:void(0);" title="First page" class="button blue-gradient glossy"><span class="icon-previous"></span></a>
                <a href="javascript:void(0);" title="Previous page" class="button blue-gradient glossy"><span class="icon-backward"></span></a>
            </div>

            <div class="button-group">
                <a href="javascript:void(0);" title="Page 1" class="button blue-gradient glossy">1</a>
                <a href="javascript:void(0);" title="Page 2" class="button blue-gradient glossy active">2</a>
                <a href="javascript:void(0);" title="Page 3" class="button blue-gradient glossy">3</a>
                <a href="javascript:void(0);" title="Page 4" class="button blue-gradient glossy">4</a>
            </div>

            <div class="button-group">
                <a href="javascript:void(0);" title="Next page" class="button blue-gradient glossy"><span class="icon-forward"></span></a>
                <a href="javascript:void(0);" title="Last page" class="button blue-gradient glossy"><span class="icon-next"></span></a>
            </div>
        </div>

        With selected:
        <select name="select90" class="select blue-gradient glossy mid-margin-left" style="width:128px">
            <option value="0">Delete</option>
            <option value="1">Duplicate</option>
            <option value="2">Put offline</option>
            <option value="3">Put online</option>
            <option value="4">Move to trash</option>
        </select>
        <button type="submit" class="button blue-gradient glossy">Go</button>
    </form>

    <ul>
        <li>
            <a href="{{ path('coramer_sigtec_company_new') }}">
                Create a new entry
            </a>
        </li>
    </ul>
            
</div>
{% endblock %}

{% block javascripts %}
    <!-- Template functions -->
    <script src="{{  asset('bundles/coramersigtecweb/frontend/js/developr.input.js') }}"></script>	
    <script src="{{ asset('bundles/coramersigtecweb/frontend/js/developr.table.js') }}"></script>

    <!-- Plugins -->
    <script src="{{ asset('bundles/coramersigtecweb/frontend/js/libs/jquery.tablesorter.min.js') }}"></script>
    <script src="{{ asset('bundles/coramersigtecweb/frontend/js/libs/DataTables/jquery.dataTables.min.js') }}"></script>
    
    <script src="{{ asset('angular/app/js/modules/sigtecModule.js') }}"></script>
    <script src="{{ asset('angular/app/js/services.js') }}"></script>
      <script src="{{ asset('angular/app/js/controllers.js') }}"></script>
      <script src="{{ asset('angular/app/js/filters.js') }}"></script>
      <script src="{{ asset('angular/app/js/directives.js') }}"></script>
{% endblock %}

{% block javascript %}
    <script type="text/javascript">
        $(document).ready(function() {
            $('#examples').dataTable({
                "bProcessing": true,
                "bServerSide": true,
                headers: {
                    0: {sorter: false},
                    6: {sorter: false}
                },
                "sAjaxSource": "{{ path('coramer_sigtec_company_index',{'_format':'json','_formatData':'dataTables'}) }}",
                "fnServerData": function(sSource, aoData, fnCallback) {
                    $.getJSON(sSource, aoData, function(json) {
                        var data = [];
                        json.aaData.forEach(function(myObj) {
                            var array = $.map(myObj, function(value, index) {
                                return [value];
                            });
                            data.push(array);
                        });
                        json.aaData = data;
                        fnCallback(json);
                    });
                }
            });

            // Table sort - styled
            $('#sorting-example1').tablesorter({
                headers: {
                    0: {sorter: false},
                    5: {sorter: false}
                }
            }).on('click', 'tbody td', function(event)
            {
                // Do not process if something else has been clicked
                if (event.target !== this)
                {
                    return;
                }

                var tr = $(this).parent(),
                        row = tr.next('.row-drop'),
                        rows;

                // If click on a special row
                if (tr.hasClass('row-drop'))
                {
                    return;
                }

                // If there is already a special row
                if (row.length > 0)
                {
                    // Un-style row
                    tr.children().removeClass('anthracite-gradient glossy');

                    // Remove row
                    row.remove();

                    return;
                }

                // Remove existing special rows
                rows = tr.siblings('.row-drop');
                if (rows.length > 0)
                {
                    // Un-style previous rows
                    rows.prev().children().removeClass('anthracite-gradient glossy');

                    // Remove rows
                    rows.remove();
                }

                // Style row
                tr.children().addClass('anthracite-gradient glossy');

                // Add fake row
                $('<tr class="row-drop">' +
                        '<td colspan="' + tr.children().length + '">' +
                        '<div class="float-right">' +
                        '<button type="submit" class="button glossy mid-margin-right">' +
                        '<span class="button-icon"><span class="icon-mail"></span></span>' +
                        'Send mail' +
                        '</button>' +
                        '<button type="submit" class="button glossy">' +
                        '<span class="button-icon red-gradient"><span class="icon-cross"></span></span>' +
                        'Remove' +
                        '</button>' +
                        '</div>' +
                        '<strong>Name:</strong> John Doe<br>' +
                        '<strong>Account:</strong> admin<br>' +
                        '<strong>Last connect:</strong> 05-07-2011<br>' +
                        '<strong>Email:</strong> john@doe.com' +
                        '</td>' +
                        '</tr>').insertAfter(tr);

            }).on('sortStart', function()
            {
                var rows = $(this).find('.row-drop');
                if (rows.length > 0)
                {
                    // Un-style previous rows
                    rows.prev().children().removeClass('anthracite-gradient glossy');

                    // Remove rows
                    rows.remove();
                }
            });

        });
    </script>
    <script type="text/javascript">
        $(document).ready(function(){
            $("#range").change(function(){
                console.log($(this).val());
                $("#limit").val($(this).val());
            });
        });
    </script>
{% endblock %}